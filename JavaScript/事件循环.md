### 事件循环


. 1. js是单线程语言
2. 函数执行时会创建执行上下文并压入执行栈
3. 函数执行的过程中，遇到网络请求，定时器，Promise等异步任务会将他们的事件压入任务队列，等待执行
4. 当执行栈为空时，主线程会去检查任务队列中是否有任务，如果有任务，就会取出最早进入任务队列的任务，并执行，执行时依然会创建执行上下文并压入执行栈，直到执行栈为空时，就会再次检查任务队列，这样就会不断重复，这个过程就是事件循环。

### 宏任务和微任务
* 宏任务，网络请求，定时器
* 微任务，Promise，MutationObserver
严格来说，当执行栈为空时，主线程会先检查微任务队列，再检查宏任务队列：
1. 检查微任务队列
	* 有任务，取出最早进入微任务队列的任务，并执行，当执行栈为空时，会再次检查微任务队列是否有任务，有任就取出最早的任务执行，直到微任务队列为空
	* 没任务，检查宏任务
2. 检查宏任务队列
	* 有任务，取出最早进入宏任务队列的任务，并执行，当执行栈为空时，会检查微任务队列中是否有任务，当执行完微任务队列中的任务后，再检查宏任务
	* 没任务，检查微任务队列，不断重复上述过程。

### 参考文章
* [详解JavaScript中的Event Loop（事件循环）机制](https://zhuanlan.zhihu.com/p/33058983)

